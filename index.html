<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hello Bae</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
</head>
<body>
  <div class="background"></div>
  <div class="popup">
    <img class="dog-img" src="dog.jpg" alt="Cute Dog">
    <h2>Hello Bae ğŸ¥°</h2>
    <p>MÃ¬nh cÃ³ Ä‘iá»u muá»‘n há»i, cáº­u pháº£i tráº£ lá»i tháº­t lÃ²ng nhaa!!!</p>
    <button id="ok-btn">OK</button>
  </div>
  <div class="question-page" style="display:none;">
    <h1 class="big-title">
      Cáº­u cÃ³ thÃ­ch mÃ¬nh khÃ´ng? 
      <span class="emoji">ğŸ˜†</span>
      <span class="emoji">ğŸ˜†</span>
    </h1>
    <p class="subtitle">
      Báº¥t ngá» chÆ°a!!! Bá»‹ lá»«a rá»“i ahihi! KhÃ´ng tráº£ lá»i mÃ  thoÃ¡t ra tá»©c lÃ  cÃ³ Ä‘Ã³ nha :v
    </p>
    <div class="btn-group">
      <button class="btn no-btn" id="no-btn">KhÃ´ng ğŸ˜ ğŸ˜ </button>
      <button class="btn yes-btn" id="yes-btn">CÃ³ ğŸ¤£ğŸ¤£</button>
    </div>
  </div>
  <div class="reason-popup" id="reason-popup" style="display:none;">
    <h2>NÃ³i lÃ­ do vÃ¬ sao cáº­u thÃ­ch mÃ¬nh Ä‘i :vvv</h2>
    <textarea id="reason-input" placeholder="Whyyy" rows="2"></textarea>
    <button class="secret-msg" id="secret-msg" style="display:none;">Äá»«ng nÃ³i ai biáº¿t nha!</button>
  </div>
  <div class="result-popup" id="result-popup" style="display:none;">
    <h2>á»’ mÃ¬nh biáº¿t cáº­u thÃ­ch mÃ¬nh lÃ¢u rá»“i, khÃ´ng cÃ³ gÃ¬ pháº£i giáº¥u cáº£ =))</h2>
    <p class="result-msg">
      Äá»«ng lo, tá»› kÃ­n miá»‡ng láº¯m. Tá»› há»©a lÃ  tá»› sáº½ nÃ³i cho cáº£ tháº¿ giá»›i biáº¿t. Tá»› há»©a mÃ  ğŸ˜ğŸ˜
    </p>
    <button class="share-btn" id="ahihi-btn">ahihi><</button>
  </div>
  <audio id="bg-music" src="music.mp3" autoplay loop style="display:none;"></audio>
  <audio id="move-sound" src="move.mp3" preload="auto"></audio>
  <form id="notifyForm" action="https://formspree.io/f/xpwrgzdr" method="POST" style="display:none;">
    <input type="hidden" name="message" value="CÃ³ ngÆ°á»i vá»«a nháº¥n nÃºt ahihi>< trÃªn trang web!">
  </form>
  <script src="script.js"></script>
  <script>
    document.getElementById('ok-btn').onclick = function() {
      document.querySelector('.popup').style.display = 'none';
      document.querySelector('.question-page').style.display = 'flex';
      enableNoBtnDodge();
    };

    function enableNoBtnDodge() {
      const noBtn = document.getElementById('no-btn');
      const moveSound = document.getElementById('move-sound');
      document.addEventListener('mousemove', e => {
        const questionPage = document.querySelector('.question-page');
        if (!questionPage || questionPage.style.display !== 'flex') return;

        const noRect = noBtn.getBoundingClientRect();
        const yesRect = document.getElementById('yes-btn').getBoundingClientRect();
        const distance = Math.hypot(e.clientX - (noRect.left + noRect.width / 2), e.clientY - (noRect.top + noRect.height / 2));

        if (distance < 100) {
          moveSound.currentTime = 0;
          moveSound.play();

          const btnGroup = document.querySelector('.btn-group');
          const groupRect = btnGroup.getBoundingClientRect();
          const maxX = btnGroup.offsetWidth - noRect.width;
          const maxY = btnGroup.offsetHeight - noRect.height;

          let newLeft, newTop, overlap, tries = 0;
          do {
            newLeft = Math.random() * maxX;
            newTop = Math.random() * maxY;

            const newRect = {
              left: groupRect.left + newLeft,
              right: groupRect.left + newLeft + noRect.width,
              top: groupRect.top + newTop,
              bottom: groupRect.top + newTop + noRect.height
            };

            overlap = !(
              newRect.right < yesRect.left - 20 ||
              newRect.left > yesRect.right + 20 ||
              newRect.bottom < yesRect.top - 20 ||
              newRect.top > yesRect.bottom + 20
            );

            tries++;
          } while (overlap && tries < 100);

          noBtn.style.position = 'absolute';
          noBtn.style.left = `${newLeft}px`;
          noBtn.style.top = `${newTop}px`;
        }
      });
    }

    function resetNoBtnPosition() {
      const noBtn = document.getElementById('no-btn');
      noBtn.style.position = 'static';
      noBtn.style.left = '';
      noBtn.style.top = '';
    }

    document.getElementById('ahihi-btn').onclick = function() {
      fetch("https://formspree.io/f/xpwrgzdr", {
        method: "POST",
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: "message=CÃ³ ngÆ°á»i vá»«a nháº¥n nÃºt ahihi>< trÃªn trang web!"
      }).then(() => {
        document.getElementById('result-popup').style.display = 'none';
        document.querySelector('.question-page').style.display = 'flex';
        document.getElementById('reason-input').value = "";
        document.getElementById('secret-msg').style.display = 'none';
        resetNoBtnPosition();
        enableNoBtnDodge();
      });
    };
  </script>
</body>
</html>